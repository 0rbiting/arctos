function createAgent(e,t,n,i){if(!t)t="";if(!n)n="";if(!i)i="";var o="/includes/forms/createagent.cfm?agent_type="+e+"&caller="+t+"&agentIdFld="+n+"&agentNameFld="+i;parent.$("#dialog").length?parent.$("#dialog").attr("src",o):($("<iframe src='"+o+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"New Agent",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")}))}function pickAgentModal(e,t,n){var i;n=encodeURIComponent(n),$("#"+t).addClass("badPick"),i=void 0!==n?n:"",$("<iframe src='"+("/picks/findAgentModal.cfm?agentIdFld="+e+"&agentNameFld="+t+"&name="+i)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","top"],title:"Pick Agent",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getFormattedDate(){var e=new Date;return e.getFullYear()+"-"+getFormattedPartTime(e.getMonth()+1)+"-"+getFormattedPartTime(e.getDate())}function getFormattedPartTime(e){return e<10?"0"+e:e}function fetchMediaMeta(){var i=[];$("li[data-doi]").each(function(e,t){var n=$(this).attr("data-doi");i.push(n)});var e=i.join();0!=e.length&&$.ajax({url:"/component/functions.cfc?queryformat=column",type:"GET",dataType:"json",data:{method:"getPubCitSts",doilist:e,returnformat:"json"},success:function(e){"SUCCESS"==e.STATUS?$.each(e.STSARY,function(e,t){var n="<ul>";n+="<li>References Count: "+t.REFERENCE_COUNT+"</li>",n+="<li>Referenced By Count: "+t.REFERENCE_BY_COUNT+"</li>",n+='<li><a data-doi="'+t.DOI+'" href="/info/publicationDetails.cfm?doi='+t.DOI+'" class="modalink">CrossRef Data</a></li>',n+="</ul>";var i=t.DOI.replace(/[\W_]+/g,"_");$("#x"+i).append(n)}):alert(e.STATUS+": "+e.MSG)},error:function(e,t,n){alert(n+": "+t+": "+e)}})}function showPubInfo(e){$("<iframe src='"+("/info/publicationDetails.cfm?doi="+e)+"' id='dialog' class='popupDialog' style='width:800px;height:800px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Publication Details",width:800,height:800,close:function(){$(this).remove()}}).width(790).height(790),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function addMedia(e,t){$("<iframe src='"+("/picks/upLinkMedia.cfm?ktype="+e+"&kval="+t)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Add Media",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function loadEditAgent(e){$("#agntEditCell").html('<img src="/images/indicator.gif">');var t="/editAllAgent.cfm?agent_id="+e;$("#agntEditCell").load(t,{},function(){history.pushState("data","","/agents.cfm?agent_id="+e)})}function loadAgentSearch(e){var t;$("#agntRslCell").html('<img src="/images/indicator.gif">'),$.ajax({url:"/component/agent.cfc?queryformat=column&method=findAgents&returnformat=json",type:"GET",dataType:"json",data:e,success:function(e){if(e.substring&&"error"==e.substring(0,5))return $("#agntRslCell").html('<span class="importantNotification">'+e+"</span>"),alert(e),!1;if(0===e.ROWCOUNT)return $("#agntRslCell").html('<span class="importantNotification">Nothing Matched.</span>'),!1;for(t='<div style="height:30em; overflow:auto;">',i=0;i<e.ROWCOUNT;i++)t+='<div><span class="likeLink" onclick="loadEditAgent('+e.DATA.AGENT_ID[i]+');">',t+=e.DATA.PREFERRED_AGENT_NAME[i]+'</span><font size="-1"> (',t+=e.DATA.AGENT_TYPE[i]+": "+e.DATA.AGENT_ID[i]+")",t+=' <a target="_blank" href="/agents.cfm?agent_id='+e.DATA.AGENT_ID[i]+'">[new window]</a></font></div>';t+="</div>",$("#agntRslCell").html(t)},error:function(e,t,n){alert(n+": "+t+": "+e)}})}function addGroupMember(){var e=parseInt($("#nnga").val())+parseInt(1),t='<div><input type="hidden" name="member_agent_id_new'+e+'" id="member_agent_id_new'+e+'">';t+='<input type="text" name="group_member_new'+e+'" id="group_member_new'+e+'"',t+=" onchange=\"pickAgentTest('member_agent_id_new"+e+"',this.id,this.value); return false;\"",t+=' onKeyPress="return noenter(event);" placeholder="new group member" class="minput"></div>',$("#newGroupMembers").append(t),$("#nnga").val(e)}function addAgentName(){var e=parseInt($("#nnan").val())+parseInt(1),t='<div id="agentnamedv'+e+'"><select name="agent_name_type_new'+e+'" id="agent_name_type_new'+e+'"></select>';t+='<input type="text" name="agent_name_new'+e+'" id="agent_name_new'+e+'" size="40" placeholder="new agent name" class="minput"></div>',$("#agentnamedv"+$("#nnan").val()).after(t),$("#agent_name_type_new1").find("option").clone().appendTo("#agent_name_type_new"+e),$("#nnan").val(e)}function addAgentStatus(){var e=parseInt($("#nnas").val())+parseInt(1),t='<div id="nas'+e+'" style="display: table-row;"><div style="display:table-cell">';t+='<select name="agent_status_new'+e+'" id="agent_status_new'+e+'" size="1"></select>',t+='</div><div style="display:table-cell"><input type="datetime" class="sinput" placeholder="status date" name="status_date_new'+e+'" id="status_date_new'+e+'"></div>',t+='<div style="display:table-cell"><textarea class="mediumtextarea" name="status_remark_new'+e+'" id="status_remark_new'+e+'" placeholder="status remark"></textarea></div></div>',$("#nas"+$("#nnas").val()).after(t),$("#agent_status_new1").find("option").clone().appendTo("#agent_status_new"+e),$("#status_date_new"+e).datepicker(),$("#nnas").val(e)}function addAgentRelationship(){var e=parseInt($("#nnar").val())+parseInt(1),t='<tr id="nar'+e+'" class="newRec"><td>';t+='<select name="agent_relationship_new'+e+'" id="agent_relationship_new'+e+'" size="1"></select> ',t+='</td><td><input type="hidden" name="related_agent_id_new'+e+'" id="related_agent_id_new'+e+'">',t+='<input type="text" name="related_agent_new'+e+'" id="related_agent_new'+e+'"',t+="onchange=\"pickAgentTest('related_agent_id_new"+e+"',this.id,this.value); return false;\"",t+='onKeyPress="return noenter(event);" placeholder="pick related agent" class="minput">',t+="</td></tr>",$("#nar"+$("#nnar").val()).after(t),$("#agent_relationship_new1").find("option").clone().appendTo("#agent_relationship_new"+e),$("#nnar").val(e)}function addAddress(){var e=parseInt($("#nnea").val())+parseInt(1),t='<div id="eaddiv'+e+'" class="newRec">';t+='<select name="address_type_new'+e+'" id="address_type_new'+e+'" size="1"></select>',t+='<input type="text" class="minput" name="address_new'+e+'" id="address_new'+e+'" placeholder="add address">',t+='<select name="valid_addr_fg_new'+e+'" id="valid_addr_fg_new'+e+'"></select>',t+='<textarea class="smalltextarea" placeholder="remark" name="address_remark_new'+e+'" id="address_remark_new'+e+'"></textarea>',t+="</div>",$("#eaddiv"+$("#nnea").val()).after(t),$("#address_type_new1").find("option").clone().appendTo("#address_type_new"+e),$("#valid_addr_fg_new1").find("option").clone().appendTo("#valid_addr_fg_new"+e),$("#nnea").val(e)}function rankAgent(e){var t="/includes/forms/agentrank.cfm?agent_id="+e;$("<div id='dialog' class='popupDialog'><img src='/images/indicator.gif'></div>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Rank Agent",width:"auto",close:function(){$(this).remove()}}).load(t,function(){$(this).dialog("option","position",["center","center"])}),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function editAgentAddress(e){var t="includes/forms/editAgentAddr.cfm?action=editAddress&addr_id="+e;$("<div id='dialog' class='popupDialog'><img src='/images/indicator.gif'></div>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Edit Address",width:"auto",close:function(){$(this).remove()}}).load(t,function(){$(this).dialog("option","position",["center","center"])}),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getUrlParameter(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e)return i[1]}}function checkReplaceNoPrint(t,n){var i;0!==$("#"+n).val().length&&(0<=$("#"+n).val().indexOf("[NOPRINT]")&&(alert("remove [NOPRINT] from "+n),t.preventDefault()),$.ajax({url:"/component/functions.cfc?queryformat=column",type:"GET",dataType:"json",async:!1,data:{method:"removeNonprinting",orig:$("#"+n).val(),userString:"[NOPRINT]",returnformat:"json"},success:function(e){e.DATA.REPLACED_WITH_USERSTRING[0]!=$("#"+n).val()&&($("#"+n).val(e.DATA.REPLACED_WITH_USERSTRING[0]),i="The form cannot be submitted: There are nonprinting characters in "+n+".\n\n",i+="Nonprinting characters have been replaced with [NOPRINT]. Remove that to continue.\n\n",i+="You may use HTML markup for print control: <br> is linebreak",alert(i),t.preventDefault())},error:function(e,t,n){alert(n+": "+t+": "+e)}}))}function setSessionCustomID(e){$.getJSON("/component/functions.cfc",{method:"setSessionCustomID",val:e,returnformat:"json",queryformat:"column"},function(e){})}function jqueryspecialescape(e){return e.replace(/[ !"#$%&'()*+,.\/:;<=>?@^`{|}~]/g,"\\$&")}function setPrevSearch(){for(var e=get_cookie("schParams").split("|"),t=0;t<e.length;t++){var n=e[t].split("::"),i=n[0],o=n[1];if(document.getElementById(i))if("collection_id"==i){var a=o.split(",");for(x=0;x<a.length;x++){var c=a[x];$("#collection_id").find("option[value="+c+"]").prop("selected","selected")}$("#collection_id").multiselect("refresh")}else if("OIDType"==i){a=o.split(",");for(x=0;x<a.length;x++){c=jqueryspecialescape(a[x]);$("#OIDType").find("option[value="+c+"]").prop("selected","selected")}$("#OIDType").multiselect("refresh")}else if("groupBy"==i){a=o.split(",");for(x=0;x<a.length;x++){c=jqueryspecialescape(a[x]);$("#groupBy").find("option[value="+c+"]").prop("selected","selected")}$("#groupBy").multiselect("refresh")}else"tgtForm"==i?changeTarget(i,o):$("#"+i).val(o)}try{setPreviousMap()}catch(e){}}function changeTarget(e,t){0===t.length&&(t="SpecimenResults.cfm"),$("#tgtForm").val(t),"SpecimenResultsSummary.cfm"==t?($("#groupByDiv").show(),$("#kmlDiv").hide()):"/bnhmMaps/kml.cfm?action=newReq"==t?($("#groupByDiv").hide(),$("#kmlDiv").show()):($("#groupByDiv").hide(),$("#kmlDiv").hide()),$("#SpecData").attr("action",t)}function resetSSForm(){document.getElementById("SpecData").reset();try{initialize()}catch(e){}}function r_getSpecSrchPref(e){var t;t=e.split(",");for(var n=0;n<t.length;n++)0<t[n].length&&showHide(t[n],1)}function checkCSV(e){var t;"csv"!=(t=e.value).substring(t.lastIndexOf(".")+1).toLowerCase()?(alert("Only files with the file extension CSV are allowed"),$("input[type=submit]").hide()):$("input[type=submit]").show()}function getMedia(e,t,n,i,o){var a;$("#"+n).find($("#imgBrowserCtlDiv")).append('<img src="/images/indicator.gif">'),a="/form/inclMedia.cfm?typ="+e+"&q="+t+"&tgt="+n+"&rpp="+i+"&pg="+o,$.get(a,function(e){$("#"+n).html(e)})}function blockSuggest(e){$.getJSON("/component/functions.cfc",{method:"changeBlockSuggest",onoff:e,returnformat:"json",queryformat:"column"},function(e){"success"==e?$("#browseArctos").html("Suggest Browser disabled. You may turn this feature back on under My Stuff."):alert("An error occured! \n "+e)})}function findPart(e,t,n){var i;i="/picks/findPart.cfm?part_name="+(t=t.replace("%","_"))+"&collCde="+n+"&partFld="+e,partpick=window.open(i,"","width=400,height=338, resizable,scrollbars")}function isValidEmailAddress(e){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)}function saveThisAnnotation(){var t,n,i,o,e;if(t=document.getElementById("idtype").value,n=document.getElementById("idvalue").value,i=document.getElementById("annotation").value,o=$("#captchaHash").val(),e=$("#captcha").val().toUpperCase(),i.length<=20)return alert("You must enter an annotation of at least 20 characters to save."),!1;if(!isValidEmailAddress($("#email").val()))return alert("Enter a valid email address."),!1;$("#annotateDiv").append('<div id="svgol" style="float:left;position:absolute;top:0;width:100%;height:100%;background-color:rgba(128,128,128,0.5);padding-left:50%;padding-top:20%;"><img src="/images/indicator.gif"></div>'),$.getJSON("/component/functions.cfc",{method:"hashString",string:e,returnformat:"json"},function(e){if(e!=o)return $("#svgol").remove(),alert("The CAPTCHA text you entered does not match the image."),!1;$.getJSON("/component/functions.cfc",{method:"addAnnotation",idType:t,idvalue:n,annotation:i,email:$("#email").val(),returnformat:"json",queryformat:"column"},function(e){return"success"==e?($("#svgol").remove(),alert("Your annotations have been saved, and the appropriate curator will be alerted. \n Thank you for helping improve Arctos!"),closeAnnotation()):($("#svgol").remove(),alert("An error occured! \n "+e)),!0})})}function openAnnotation(e){$("<iframe src='"+("/info/annotate.cfm?q="+e)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").prop("id","dialog").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Report Bad Data",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function openAnnotation__old(e){var t,n,i;(t=document.createElement("div")).id="bgDiv",t.className="bgDiv",t.setAttribute("onclick","closeAnnotation()"),document.body.appendChild(t),(n=document.createElement("div")).id="annotateDiv",n.className="annotateBox",n.innerHTML="",n.src="",document.body.appendChild(n),i="/info/annotate.cfm?q="+e,$("#annotateDiv").load(i,{},function(){})}function closeAnnotation(){parent.$(".ui-dialog-titlebar-close").trigger("click")}function archiveSpecimens(){if(p="Archive search RESULTS. Use Save Search to save CRITERIA.\n",p+=" Type a name for the archive. Names must consist only of lower-case letters, numbers, dash (-), and underbar (_).\n",p+=" The process will take a few seconds; hang tight until you get a confirmation.\n",p+="'myarchive' will create a new archive (or fail); '+myarchive' will append to your existing archive 'myarchive' (or fail).",sName=prompt(p),!sName)return!1;$.getJSON("/component/functions.cfc",{method:"archiveSpecimen",archive_name:sName,returnformat:"json",queryformat:"column"},function(e){alert(e)})}function lockArchive(e){if(!0!==confirm("Are you sure you want to lock this Archive?"))return!1;jQuery.getJSON("/component/functions.cfc",{method:"lockArchive",archive_name:e,returnformat:"json",queryformat:"column"},function(e){alert(e)})}function changeCollection(t){jQuery.getJSON("/component/functions.cfc",{method:"changeexclusive_collection_id",tgt:"",returnformat:"json",queryformat:"column"},function(e){document.location=t})}function saveSearch(t,e){var n,i,o,a,c;n=Date.now(),void 0!==e&&0<e.length&&(c="ERROR: "+e+"\n\n"),c="Saving search for URL:\n\n"+t+" \n\nName your saved search (or copy and ",c+="paste the link above).\n\nManage or email saved searches from your profile, or go to /saved/{name of saved search}. Note ",c+="that saved searches, except those sepecifying only GUIDs, are dynamic; results change as data changes.\n\nName of saved search (must be unique):\n",null!==(i=prompt(c,n))&&(o=encodeURIComponent(i),a=t,$.getJSON("/component/functions.cfc",{method:"saveSearch",returnURL:a,srchName:o,returnformat:"json",queryformat:"column"},function(e){if("success"!=e){if(alert(e),"You must create an account or log in to save searches."==e)return!1;saveSearch(t,e)}else pathArray=window.location.href.split("/"),protocol=pathArray[0],host=pathArray[2],url=protocol+"//"+host,alert("Saved search \n"+url+"/saved/"+o+"\n Find it in the My Stuff tab.")}))}function crcloo(e,t){$.getJSON("/component/functions.cfc",{method:"clientResultColumnList",ColumnList:e,in_or_out:t,returnformat:"json",queryformat:"column"})}function checkAllById(e){var t;t=e.split(","),$.each(t,function(e,t){$("#"+t).prop("checked",!0)}),crcloo(e,"in")}function uncheckAllById(e){var t;t=e.split(","),$.each(t,function(e,t){$("#"+t).prop("checked",!1)}),crcloo(e,"out")}function hidePageLoad(){$("#loading").hide()}function addPartToContainer(){var e,t,n,i,o;if(document.getElementById("pTable").className="red",e=document.getElementById("collection_object_id").value,t=document.getElementById("part_name").value,n=document.getElementById("part_name_2").value,i=document.getElementById("parent_barcode").value,o=document.getElementById("new_container_type").value,0===e.length||0===t.length||0===i.length)return alert("Something is null"),!1;$.getJSON("/component/functions.cfc",{method:"addPartToContainer",collection_object_id:e,part_id:t,part_id2:n,parent_barcode:i,new_container_type:o,returnformat:"json",queryformat:"column"},function(e){statAry=e.split("|");var t=statAry[0],n=statAry[1];document.getElementById("pTable").className="";var i=document.getElementById("msgs"),o=document.getElementById("msgs_hist"),a=i.innerHTML+"<hr>"+o.innerHTML;o.innerHTML=a,i.innerHTML=n,0===t?i.className="error":(i.className="successDiv",document.getElementById("oidnum").focus(),document.getElementById("oidnum").select(),getParts())})}function clonePart(){var e=document.getElementById("collection_id").value,t=document.getElementById("other_id_type").value,n=document.getElementById("oidnum").value;0<e.length&&0<t.length&&0<n.length?$.getJSON("/component/functions.cfc",{method:"getSpecimen",collection_id:e,other_id_type:t,oidnum:n,returnformat:"json",queryformat:"column"},function(e){-1<toString(e.DATA.COLLECTION_OBJECT_ID[0]).indexOf("Error:")?alert(e.DATA.COLLECTION_OBJECT_ID[0]):newPart(e.DATA.COLLECTION_OBJECT_ID[0])}):alert("Error: cannot resolve ID to specimen.")}function checkSubmit(){!0===document.getElementById("submitOnChange").checked&&addPartToContainer()}function newPart(e){var t,n;collection_id=document.getElementById("collection_id").value,t=document.getElementById("part_name").value,n="/form/newPart.cfm",n+="?collection_id="+collection_id,n+="&collection_object_id="+e,divpop(n+="&part="+t)}function getParts(){var e,t,n,o,a,c,l,r,d,s,u,m,p,g,h,f,v,_,w,y;e=document.getElementById("collection_id").value,t=document.getElementById("other_id_type").value,n=document.getElementById("oidnum").value,0<e.length&&0<t.length&&0<n.length&&((o=document.createElement("DIV")).id="ajaxStatus",o.className="ajaxStatus",o.innerHTML="Fetching parts...",document.body.appendChild(o),a=document.getElementById("noBarcode").checked,c=document.getElementById("noSubsample").checked,$.getJSON("/component/functions.cfc",{method:"getParts",collection_id:e,other_id_type:t,oidnum:n,noBarcode:a,noSubsample:c,returnformat:"json",queryformat:"column"},function(e){if(l=e.DATA,o=document.getElementById("ajaxStatus"),document.body.removeChild(o),r=document.getElementById("thisSpecimen"),d=document.getElementById("collection_id"),s=document.getElementById("collection_object_id"),u=document.getElementById("part_name"),m=document.getElementById("part_name_2"),p=u.value,g=m.value,u.options.length=0,m.options.length=0,h=d.selectedIndex,f=d.options[h].text,v=document.getElementById("other_id_type").value,_=document.getElementById("oidnum").value,w=f+" "+v+" "+_,-1<l.PART_NAME[0].indexOf("Error:"))r.className="error",w+=" = "+l.PART_NAME[0],s.value="",document.getElementById("pTable").className="red";else{for(document.getElementById("pTable").className="",r.className="",s.value=l.COLLECTION_OBJECT_ID[0],(y=document.createElement("option")).setAttribute("value",""),y.appendChild(document.createTextNode("")),m.appendChild(y),i=0;i<e.ROWCOUNT;i++)y=document.createElement("option"),option2=document.createElement("option"),y.setAttribute("value",l.PARTID[i]),option2.setAttribute("value",l.PARTID[i]),pStr=l.PART_NAME[i],null!==l.BARCODE[i]&&(pStr+=" ["+l.BARCODE[i]+"]"),y.appendChild(document.createTextNode(pStr)),option2.appendChild(document.createTextNode(pStr)),u.appendChild(y),m.appendChild(option2);u.value=p,m.value=g,w+=' = <a target="_blank" href="/guid/'+l.COLLECTION[0]+":"+l.CAT_NUM[0]+'">',w+=l.COLLECTION[0]+":"+l.CAT_NUM[0]+"</a>",w+=" ("+l.CUSTOMIDTYPE[0]+" "+l.CUSTOMID[0]+")"}r.innerHTML=w}))}function divpop(e){var t,n,i;(n=document.createElement("div")).id="bgDiv",n.className="bgDiv",document.body.appendChild(n),(i=document.createElement("div")).id="ppDiv",i.className="pickBox",i.innerHTML="Loading....",i.src="",document.body.appendChild(i),window.XMLHttpRequest?t=new XMLHttpRequest:window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==t&&(t.onreadystatechange=function(){divpopDone(t)},t.open("GET",e,!0),t.send(""))}function divpopDone(e){if(4==e.readyState){200==e.status?document.getElementById("ppDiv").innerHTML=e.responseText:document.getElementById("ppDiv").innerHTML="ahah error:\n"+e.statusText;var t=document.getElementById("ppDiv"),n=document.createElement("span");n.className="popDivControl",n.setAttribute("onclick","divpopClose();"),n.innerHTML="X",t.appendChild(n)}}function divpopClose(){var e=document.getElementById("ppDiv");document.body.removeChild(e);var t=document.getElementById("bgDiv");document.body.removeChild(t)}function makePart(){var e,t,n,i,o,a,c,l,r,d,s,u;e=document.getElementById("collection_object_id").value,t=document.getElementById("npart_name").value,n=document.getElementById("lot_count").value,i=document.getElementById("coll_obj_disposition").value,o=document.getElementById("condition").value,a=document.getElementById("coll_object_remarks").value,c=document.getElementById("barcode").value,l=document.getElementById("new_container_type").value,$.getJSON("/component/functions.cfc",{method:"makePart",collection_object_id:e,part_name:t,lot_count:n,coll_obj_disposition:i,condition:o,coll_object_remarks:a,barcode:c,new_container_type:l,returnformat:"json",queryformat:"column"},function(e){r=e.DATA,"error"==r.STATUS[0]?(d=r.MSG[0],alert(d)):(d="Created part: ",d+=r.PART_NAME[0]+" ",null!==r.BARCODE[0]&&(d+="barcode "+r.BARCODE[0],null!==r.NEW_CONTAINER_TYPE[0]&&(d+="( "+r.NEW_CONTAINER_TYPE[0]+")")),s=document.getElementById("ppDiv"),document.body.removeChild(s),u=document.getElementById("bgDiv"),document.body.removeChild(u),getParts())})}function getAgentInfo(e){removeHelpDiv();var t=document.createElement("div");t.id="bgDiv",t.className="bgDiv",t.setAttribute("onclick","removeHelpDiv()"),document.body.appendChild(t);var n=document.createElement("div");n.id="helpDiv",n.className="helpBox centered",n.innerHTML='<img src="/images/indicator.gif" style="margin:5em;">',document.body.appendChild(n),$(n).load("/ajax/agentInfo.cfm",{agent_id:e,addCtl:1})}function scrollToAnchor(e){var t=$("a[name='"+e+"']");$("html,body").animate({scrollTop:t.offset().top},"slow")}function changefancyCOID(e){$.getJSON("/component/functions.cfc",{method:"changefancyCOID",tgt:e,returnformat:"json",queryformat:"column"},function(e){if("success"==e)document.getElementById("fancyCOID").className="";else alert("An error occured: "+e)})}function changeBigSearch(e){$.getJSON("/component/functions.cfc",{method:"changeBigSearch",tgt:e,returnformat:"json",queryformat:"column"},function(e){if("success"==e)document.getElementById("changeBigSearch").className="";else alert("An error occured: "+e)})}function changecustomOtherIdentifier(e){$.getJSON("/component/functions.cfc",{method:"changecustomOtherIdentifier",tgt:e,returnformat:"json",queryformat:"column"},function(e){"success"==e?document.getElementById("customOtherIdentifier").className="":alert("An error occured: "+e)})}function removeHelpDiv(){$("#bgDiv").remove(),$("#helpDiv").remove()}function saveSpecSrchPref(t,n){var o,a,c,l,r;$.getJSON("/component/functions.cfc",{method:"saveSpecSrchPref",id:t,onOff:n,returnformat:"json",queryformat:"column"},function(e){if(o=e.split(","),a=o[0],t=o[1],n=o[2],"cookie"==a){if(c=[],l=readCookie("specsrchprefs"),r=-1,null!==l)for(c=l.split(","),i=0;i<c.length;i++)c[i]==t&&(r=i);1==n?-1==r&&c.push(t):-1!=r&&c.splice(r,1),createCookie("specsrchprefs",c.join(),0)}})}function showHide(t,n){var e,i,o;$("#c_"+t).length&&$("#e_"+t).length&&(e="spatial_query"==t?(i='<span class="secControl" style="font-size:.9em;" id="c_'+t+'" onclick="showHide(\''+t+"',0)\">Hide Google Map</span>",'<span class="secControl" style="font-size:.9em;" id="c_'+t+'" onclick="showHide(\''+t+"',1)\">Select on Google Map</span>"):(i='<span class="secControl" id="c_'+t+'" onclick="showHide(\''+t+"',0)\">Show Fewer Options</span>",'<span class="secControl" id="c_'+t+'" onclick="showHide(\''+t+"',1)\">Show More Options</span>"),1==n?(o="/includes/SpecSearch/"+t+".cfm",$("#c_"+t).html('<img src="/images/indicator.gif">'),$.get(o,function(e){$("#e_"+t).html(e),$("#c_"+t).replaceWith(i),saveSpecSrchPref(t,n)})):($("#e_"+t).html(""),$("#c_"+t).replaceWith(e),saveSpecSrchPref(t,n)))}function closeAndRefresh(){var e;document.location=location.href,e=document.getElementById("customDiv"),document.body.removeChild(e)}function getFormValues(){spAry=[],$("#SpecData *").filter(":input").each(function(){if($(this).val()){var e=this.name+"::"+String($(this).val());-1==spAry.indexOf(e)&&spAry.push(e)}}),str=spAry.join("|"),document.cookie="schParams="+str}function createCookie(e,t,n){var i,o;i=n?((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),"; expires="+o.toGMTString()):"",document.cookie=e+"="+t+i+"; path=/"}function readCookie(e){var t,n,i,o;for(t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}function get_cookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?unescape(t[2]):null}function changeexclusive_collection_id(e){$.getJSON("/component/functions.cfc",{method:"changeexclusive_collection_id",tgt:e,returnformat:"json",queryformat:"column"},function(e){if("success"==e)document.getElementById("exclusive_collection_id").className="";else alert("An error occured: "+e)})}function IsNumeric(e){var t,n=!0;for(i=0;i<e.length&&!0===n;i++)t=e.charAt(i),-1=="0123456789.".indexOf(t)&&(n=!1);return n}function orapwCheck(e,t){var n=/^[A-Za-z0-9!$%&_?(\-)<>=/:;*\.]$/,i="Password is acceptable";-1<e.indexOf(t)&&(i="Password may not contain your username."),(e.length<6||30<e.length)&&(i="Password must be between 6 and 30 characters."),e.match(/[a-zA-Z]/)||(i="Password must contain at least one letter."),e.match(/\d+/)||(i="Password must contain at least one number."),e.match(/[!,$,%,&,*,?,_,-,(,),<,>,=,/,:,;,.]/)||(i="Password must contain at least one of: !,$,%,&,*,?,_,-,(,),<,>,=,/,:,;.");for(var o=0;o<e.length;o++)e.charAt(o).match(n)||(i="Password may contain only A-Z, a-z, 0-9, and !$%&()`*+,-/:;<=>?_.");return i}function getCtDoc(e,t){windowOpener("/info/ctDocumentation.cfm?table="+e+"&field="+t,"ctDocWin","width=700,height=400, resizable,scrollbars")}function windowOpener(e,t,n){popupWins=[],"object"!=typeof popupWins[t]?popupWins[t]=window.open(e,t,n):popupWins[t].closed?popupWins[t]=window.open(e,t,n):popupWins[t].location.href=e,popupWins[t].focus()}function getDocs(e,t,n){$.getJSON("/component/functions.cfc",{method:"get_docs",uri:e,anchor:t,returnformat:"json"},function(e){"404"==e?alert("help not found"):"win"==n?window.open(e):($("<iframe src='"+e+"' id='dialog' class='popupDialog' ></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Arctos Documentation",width:90*$(window).width()/100,height:90*$(window).height()/100,close:function(){$(this).remove()}}).width(.9*$(window).width()-10).height(.85*$(window).height()-10),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")}))})}function getDocs__old(e,t){$.getJSON("/component/functions.cfc",{method:"get_docs",uri:e,anchor:t,returnformat:"json"},function(e){"404"==e?alert("help not found"):siteHelpWin=windowOpener(e,"HelpWin","width=1400,height=800,resizable,scrollbars,location,toolbar")})}function noenter(e){return 13!=(window.event?window.event.keyCode:e.which)}function chgCondition(e){helpWin=windowOpener("/picks/condition.cfm?collection_object_id="+e,"conditionWin","width=800,height=338, resizable,scrollbars")}function getLoan(e,t,n,i){var o;o="/picks/getLoan.cfm?LoanIDFld="+e+"&LoanNumberFld="+t+"&loanNumber="+n+"&agent_name="+i,loanpickwin=window.open(o,"","width=400,height=338, resizable,scrollbars")}function pickSpecEvtLnk(e,t,n){$("<iframe src='"+("/picks/linkSpecimenEvent.cfm?collection_object_id="+e+"&rel_key_typ="+t+"&rel_key_val="+n)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","top"],title:"Pick Linked Event",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function addPermitToTrans(e,t){$("<iframe src='"+("/picks/PermitPick.cfm?transaction_id="+e+"&callbackfunction="+t)+"' id='dialog' class='popupDialog' style='width:1200px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Pick Agent",width:1200,height:600,close:function(){$(this).remove()}}).width(1190).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function findDOI(e){$("<iframe src='"+("/picks/findDOI.cfm?publication_title="+e)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Find DOI",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getPublication(e,t,n){var i="/picks/findPublication.cfm?pubStringFld="+e+"&publication_title="+n;$("<iframe src='"+(i+="&pubIdFld="+t)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Find Publication",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getAgent(e,t,n,i,o){var a;a="/picks/findAgent.cfm?agentIdFld="+e+"&agentNameFld="+t+"&formName="+n+"&agent_name="+i+"&allowCreation="+o,agentpickwin=window.open(a,"","width=400,height=338, resizable,scrollbars")}function getProject(e,t,n,i){var o;o="/picks/findProject.cfm?projIdFld="+e+"&projNameFld="+t+"&formName="+n+"&project_name="+i,projpickwin=window.open(o,"","width=400,height=338, resizable,scrollbars")}function findCatalogedItem(e,t,n,i,o,a){var c;c="/picks/findCatalogedItem.cfm?collIdFld="+e+"&CatNumStrFld="+t+"&formName="+n+"&oidType="+i+"&oidNum="+o+"&collID="+a,catItemWin=window.open(c,"","width=400,height=338, resizable,scrollbars")}function findCollEvent(e,t,n,i){var o;o="/picks/findCollEvent.cfm?collIdFld="+e+"&dispField="+n+"&formName="+t+"&collecting_event_name="+i,ColPickwin=window.open(o,"","width=800,height=600, resizable,scrollbars")}function getAccn(e,t,n){var i="/picks/findAccn.cfm?r_accnNumber="+e+"&rtnFldID="+t+"&r_InstAcrColnCde="+n;i=window.open(i,"","width=400,height=338, resizable,scrollbars")}function getAccnMedia(e,t){var n;n="/picks/getAccnMedia.cfm?idOfTxtFld="+e+"&idOfPKeyFld="+t,n=window.open(n,"","width=400,height=338, resizable,scrollbars")}function getAccn2(e,t){var n;n="/picks/getAccn.cfm?accnNumber="+e+"&collectionID="+t,n=window.open(n,"","width=400,height=338, resizable,scrollbars")}function GeogPick(e,t,n,i){var o;o="/picks/GeogPick2.cfm?geogIdFld="+e+"&highGeogFld="+t+"&formName="+n+"&srchstring="+i,geogpick=window.open(o,"","width=600,height=600, toolbar,resizable,scrollbars,")}function getGeog(e,t,n,i){var o;o="/picks/GeogPick2.cfm?geogIdFld="+e+"&highGeogFld="+t+"&formName="+n+"&srchstring="+i,geogpick=window.open(o,"","width=600,height=600, toolbar,resizable,scrollbars,")}function getGeog__oldnbusted(e,t,n,i){var o;o="/picks/findHigherGeog.cfm?geogIdFld="+e+"&geogStringFld="+t+"&formName="+n+"&geogString="+i,geogpickwin=window.open(o,"","width=400,height=338, resizable,scrollbars")}function confirmDelete(e,t){if(t=t||"this record",!0!==confirm("Are you sure you want to delete "+t+"?"))return!1;document[e].submit()}function getHistory(e){historyWin=windowOpener("/info/ContHistory.cfm?container_id="+e,"historyWin","width=800,height=600, resizable,scrollbars")}function getQuadHelp(){helpWin=windowOpener("/info/quad.cfm","quadHelpWin","width=800,height=600, resizable,scrollbars,status")}function getLegal(e){helpWin=windowOpener("/info/legal.cfm?content="+e,"legalWin","width=400,height=338, resizable,scrollbars")}function getInfo(e,t){infoWin=windowOpener("/info/SpecInfo.cfm?subject="+e+"&thisId="+t,"infoWin","width=800,height=500, resizable,scrollbars")}function findMedia(e,t,n){var i;i="/picks/findMedia.cfm?mediaIdFld="+t+"&mediaStringFld="+e+"&media_uri="+n,mediapick=window.open(i,"","width=400,height=338, resizable,scrollbars")}function taxaPick(e,t,n,i){var o;o="/picks/TaxaPick.cfm?taxonIdFld="+e+"&taxonNameFld="+t+"&formName="+n+"&scientific_name="+i,taxapick=window.open(o,"","width=800,height=800, resizable,scrollbars")}function CatItemPick(e,t,n,i){var o;o="/picks/CatalogedItemPick.cfm?collIdFld="+e+"&catNumFld="+t+"&formName="+n+"&sciNameFld="+i,window.open(o,"","width=400,height=338, resizable,scrollbars")}function findAgentName(e,t,n){var i;i="/picks/findAgentName.cfm?agentIdFld="+e+"&agentNameFld="+t+"&agentName="+n,agentpick=window.open(i,"","width=400,height=338, resizable,scrollbars")}function addrPick(e,t,n){var i;i="/picks/AddrPick.cfm?addrIdFld="+e+"&addrFld="+t+"&formName="+n,addrpick=window.open(i,"","width=400,height=338, resizable,scrollbars")}function LocalityPick(e,t,n,i){var o;o="/picks/LocalityPick.cfm?localityIdFld="+e+"&speclocFld="+t+"&formName="+n+"&locality_name="+i,localitypick=window.open(o,"","width=800,height=600,resizable,scrollbars,")}function findJournal(e,t,n,i){var o;o="/picks/findJournal.cfm?journalIdFld="+e+"&journalNameFld="+t+"&formName="+n+"&journalName="+i,window.open(o,"","width=400,height=338, toolbar,location,status,menubar,resizable,scrollbars,")}function deleteEncumbrance(e,t){var n;n="/picks/DeleteEncumbrance.cfm?encumbrance_id="+e+"&collection_object_id="+t,window.open(n,"","width=400,height=338, toolbar,location,status,menubar,resizable,scrollbars,")}function getAllSheets(){var e,t,n,i;if(!window.ScriptEngine&&navigator.__ice_version)return document.styleSheets;if(document.getElementsByTagName)e=document.getElementsByTagName("LINK"),t=document.getElementsByTagName("STYLE");else{if(!document.styleSheets||!document.all)return[];e=document.all.tags("LINK"),t=document.all.tags("STYLE")}for(i=0,os=[];e[i];i++)"string"==typeof(n=e[i].rel?e[i].rel:e[i].getAttribute?e[i].getAttribute("rel"):"")&&n.toLowerCase().indexOf("style")+1&&(os[os.length]=e[i]);for(i=0;t[i];i++)os[os.length]=t[i];return os}function changeStyle(){var e,t;for(e=0,ss=getAllSheets();ss[e];e++)for(ss[e].title&&(ss[e].disabled=!0),t=0;t<arguments.length;t++)ss[e].title==arguments[t]&&(ss[e].disabled=!1);ss.length||alert("Your browser cannot change stylesheets")}function toProperCase(e){var t=document.getElementById(e),n=(t.value.length,t.selectionStart),i=t.selectionEnd,o=t.value.substring(n,i).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()}),a=t.value.substring(0,n)+o+t.value.substring(i,t.value.length);t.value=a}function italicize(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,o=t.selectionEnd,a=t.value.substring(i,o);if(0<a.length){var c="<i>"+a+"</i>";t.value=t.value.substring(0,i)+c+t.value.substring(o,n)}}function bold(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,o=t.selectionEnd,a=t.value.substring(i,o);if(0<a.length){var c="<b>"+a+"</b>";t.value=t.value.substring(0,i)+c+t.value.substring(o,n)}}function superscript(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,o=t.selectionEnd,a=t.value.substring(i,o);if(0<a.length){var c="<sup>"+a+"</sup>";t.value=t.value.substring(0,i)+c+t.value.substring(o,n)}}function subscript(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,o=t.selectionEnd,a=t.value.substring(i,o);if(0<a.length){var c="<sub>"+a+"</sub>";t.value=t.value.substring(0,i)+c+t.value.substring(o,n)}}function setPartAttOptions(t,e){var n,i,o,c,l;$.getJSON("/component/functions.cfc",{method:"getPartAttOptions",returnformat:"json",patype:e},function(e){if(e.TYPE,n="attribute_value_"+t,o="attribute_units_"+t,"unit"==e.TYPE){for(i='<input type="text" name="'+n+'" id="'+n+'">',$("#v_"+t).html(i),c=e.VALUES.split("|"),i='<select name="'+o+'" id="'+o+'">',a=0;a<c.length;++a)i+='<option value="'+c[a]+'">'+c[a]+"</option>";i+="</select>",$("#u_"+t).html(i)}else if("value"==e.TYPE){for(c=e.VALUES.split("|"),i='<select name="'+n+'" id="'+n+'">',a=0;a<c.length;++a)i+='<option value="'+c[a]+'">'+c[a]+"</option>";i+="</select>",$("#v_"+t).html(i),$("#u_"+t).html("")}else l='<textarea name="'+n+'" id="'+n+'" class="smalltextarea"></textarea>',$("#v_"+t).html(l),$("#u_"+t).html("")})}function mgPartAtts(e){addBGDiv("closePartAtts()");var t=document.createElement("iFrame");t.id="partsAttDiv",t.className="annotateBox",t.innerHTML="<br>Loading...",document.body.appendChild(t);var n="/form/partAtts.cfm?partID="+e;t.src=n}function closePartAtts(){$("#bgDiv").remove(),$("#partsAttDiv").remove(),$("#bgDiv",window.parent.document).remove(),$("#partsAttDiv",window.parent.document).remove()}function removeUpload(){document.getElementById("uploadDiv")&&$("#uploadDiv").remove(),removeBgDiv()}function closeUpload(e,t){document.getElementById("media_uri").value=e,document.getElementById("preview_uri").value=t;var n=e.split(".").pop();"jpg"==n||"jpeg"==n?($("#mime_type").val("image/jpeg"),$("#media_type").val("image")):"pdf"==n?($("#mime_type").val("application/pdf"),$("#media_type").val("text")):"mp3"==n?($("#mime_type").val("audio/mpeg3"),$("#media_type").val("audio")):"wav"==n?($("#mime_type").val("audio/x-wav"),$("#media_type").val("audio")):"dng"==n?($("#mime_type").val("image/dng"),$("#media_type").val("image")):"png"==n?($("#mime_type").val("image/png"),$("#media_type").val("image")):"tif"==n||"tiff"==n?($("#mime_type").val("image/tiff"),$("#media_type").val("image")):"htm"==n||"html"==n?($("#mime_type").val("text/html"),$("#media_type").val("")):"txt"==n?($("#mime_type").val("text/plain"),$("#media_type").val("text")):"mp4"==n&&($("#mime_type").val("video/mp4"),$("#media_type").val("video")),removeUpload()}function generateMD5(){var t;$.getJSON("/component/functions.cfc",{method:"genMD5",uri:$("#media_uri").val(),returnformat:"json",queryformat:"column"},function(e){addLabel(t=parseInt($("#number_of_labels").val())+parseInt(1)),$("#label__"+t).val("MD5 checksum"),$("#label_value__"+t).val(e)})}function closePreviewUpload(e){var t=document.getElementById("uploadDiv");document.body.removeChild(t),document.getElementById("preview_uri").value=e}function pickedRelationship(e){var t=document.getElementById(e).value,n=e.lastIndexOf("__"),i=e.substring(n+2,e.length),o=t.split(" "),a=o[o.length-1],c="related_id__"+i,l="related_value__"+i;document.getElementById(c).value="",(document.getElementById(l).value="")===a||("agent"==a?getAgent(c,l,"newMedia",""):"locality"==a?LocalityPick(c,l,"newMedia"):"collecting_event"==a?findCollEvent(c,"newMedia",l):"cataloged_item"==a?findCatalogedItem(c,l,"newMedia"):"project"==a?getProject(c,l,"newMedia"):"taxon_name"==a?taxaPick(c,l,"newMedia"):"publication"==a?getPublication(l,c,""):"accn"==a?getAccnMedia(l,c):"media"==a?findMedia(l,c):"loan"==a?getLoan(c,l):"permit"==a?alert("Edit permit to add Media"):"delete"==a?document.getElementById(l).value="Marked for deletion.....":alert("Something is broken. I have no idea what to do with a relationship to "+a))}function addRelation(e){var t,n,i,o,a,l,r,d,s,u,m,p;t=document.getElementById("relationships"),(n=document.createElement("div")).id="relationshipDiv__"+e,t.appendChild(n),o="relationship__"+(i=e-1),(a=document.getElementById(o).cloneNode(!0)).name="relationship__"+e,a.id="relationship__"+e,a.value="delete",n.appendChild(a),c=document.createElement("textNode"),c.innerHTML=":&nbsp;",n.appendChild(c),l="related_value__"+(i=e-1),(r=document.getElementById(l).cloneNode(!0)).name="related_value__"+e,r.id="related_value__"+e,r.value="",n.appendChild(r),d="related_id__"+i,(s=document.getElementById(d).cloneNode(!0)).name="related_id__"+e,s.id="related_id__"+e,n.appendChild(s),u=document.getElementById("addRelationship"),t.removeChild(u),m="addRelation("+(e+1)+")",u.setAttribute("onclick",m),t.appendChild(u),(p=document.getElementById("number_of_relations")).value=parseInt(p.value)+1}function addLabel(e){var t,n,i,o,a,l,r,d,s,u;t=document.getElementById("labels"),(n=document.createElement("div")).id="labelsDiv__"+e,t.appendChild(n),o="label__"+(i=e-1),(a=document.getElementById(o).cloneNode(!0)).name="label__"+e,a.id="label__"+e,a.value="",n.appendChild(a),c=document.createElement("textNode"),c.innerHTML=":&nbsp;",n.appendChild(c),l="label_value__"+i,(r=document.getElementById(l).cloneNode(!0)).name="label_value__"+e,r.id="label_value__"+e,r.value="",n.appendChild(r),d=document.getElementById("addLabel"),t.removeChild(d),s="addLabel("+(e+1)+")",d.setAttribute("onclick",s),t.appendChild(d),(u=document.getElementById("number_of_labels")).value=parseInt(u.value)+1}function saveAgentRank(){$.getJSON("/component/functions.cfc",{method:"saveAgentRank",agent_id:$("#agent_id").val(),agent_rank:$("#agent_rank").val(),remark:$("#remark").val(),transaction_type:$("#transaction_type").val(),returnformat:"json",queryformat:"column"},function(e){if(0<e.length&&"fail"==e.substring(0,4))alert(e);else{var t='<tr id="tablr'+e+'"><td>'+$("#agent_rank").val()+"</td>";t+="<td>"+$("#transaction_type").val()+"</td>",t+="<td>- just now - </td>",t+='<td>- you - <span class="infoLink" onclick="revokeAgentRank(\''+e+"');\">revoke</span></td>",t+="<td>"+$("#remark").val()+"</td></tr>",$("#agntRankTbl").append(t)}})}function revokeAgentRank(t){$.getJSON("/component/functions.cfc",{method:"revokeAgentRank",agent_rank_id:t,returnformat:"json",queryformat:"column"},function(e){0<e.length&&"fail"==e.substring(0,4)?alert(e):$("#tablr"+t).remove()})}function removeMediaMultiCatItem(){$("#bgDiv").remove(),$("#pickFrame").remove()}function manyCatItemToMedia(e){var t=document.createElement("div");t.id="bgDiv",t.className="bgDiv",t.setAttribute("onclick","removeMediaMultiCatItem()"),document.body.appendChild(t),$('<iframe id="pickFrame" name="pickFrame" class="pickDiv" src="'+("/includes/forms/manyCatItemToMedia.cfm?media_id="+e)+'">').appendTo("body")}function pickThis(e,t,n,i){document.getElementById(e).value=n,document.getElementById(t).value=i,document.getElementById(e).className="goodPick",removePick()}function removePick(){document.getElementById("pickDiv")&&$("#pickDiv").remove(),removeBgDiv()}function addBGDiv(e){var t=document.createElement("div");t.id="bgDiv",t.className="bgDiv",null!==e&&0!==e.length||(e="removeBgDiv()"),t.setAttribute("onclick",e),document.body.appendChild(t)}function removeBgDiv(){document.getElementById("bgDiv")&&$("#bgDiv").remove()}function deleteAgent(e){$("#author_name"+e).addClass("red").val("deleted"),$("#authortr"+e+" td:nth-child(1)").addClass("red"),$("#authortr"+e+" td:nth-child(3)").addClass("red")}$.datepicker.setDefaults({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,constrainInput:!1}),$(document).ready(function(){$(".helpLink").live("click",function(e){if(null==(t=$(this).data("helplink")))var t=this.id;$("<iframe src='"+("/doc/get_short_doc.cfm?fld="+t)+"' id='dialog' class='popupDialog' style='width:800px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:{my:"top",at:"top+150"},title:"Documentation",width:800,height:600,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}),$("#c_identifiers_cust").click(function(e){var t=document.createElement("div");t.id="bgDiv",t.className="bgDiv",t.setAttribute("onclick","closeAndRefresh()"),document.body.appendChild(t);var n=document.createElement("div");n.id="customDiv",n.className="sscustomBox",n.innerHTML="<br>Loading...",document.body.appendChild(n);$(n).load("/includes/SpecSearch/customIDs.cfm",{},function(){})}),self!=top&&null!=parent&&parent.frames[0].thisStyle&&changeStyle(parent.frames[0].thisStyle),$("input[type='date'], input[type='datetime']").datepicker()}),function(s){s.fn.superfish=function(i){function o(){var e=s(this),t=d(e);clearTimeout(t.sfTimer),e.showSuperfishUl().siblings().hideSuperfishUl()}function a(){var e=s(this),t=d(e),n=c.op;clearTimeout(t.sfTimer),t.sfTimer=setTimeout(function(){n.retainPath=-1<s.inArray(e[0],n.$path),e.hideSuperfishUl(),n.$path.length&&e.parents(["li.",n.hoverClass].join("")).length<1&&o.call(n.$path)},n.delay)}var c=s.fn.superfish,l=c.c,r=s(['<span class="',l.arrowClass,'"> &#187;</span>'].join("")),d=function(e){var t=e.parents(["ul.",l.menuClass,":first"].join(""))[0];return c.op=c.o[t.serial],t};return this.each(function(){var e=this.serial=c.o.length,t=s.extend({},c.defaults,i);t.$path=s("li."+t.pathClass,this).slice(0,t.pathLevels).each(function(){s(this).addClass([t.hoverClass,l.bcClass].join(" ")).filter("li:has(ul)").removeClass(t.pathClass)}),c.o[e]=c.op=t,s("li:has(ul)",this)[s.fn.hoverIntent&&!t.disableHI?"hoverIntent":"hover"](o,a).each(function(){t.autoArrows&&function(e){e.addClass(l.anchorClass).append(r.clone())}(s(">a:first-child",this))}).not("."+l.bcClass).hideSuperfishUl();var n=s("a",this);n.each(function(e){var t=n.eq(e).parents("li");n.eq(e).focus(function(){o.call(t)}).blur(function(){a.call(t)})}),t.onInit.call(this)}).each(function(){var e=[l.menuClass];!c.op.dropShadows||s.browser.msie&&s.browser.version<7||e.push(l.shadowClass),s(this).addClass(e.join(" "))})};var i=s.fn.superfish;i.o=[],i.op={},i.IE7fix=function(){var e=i.op;s.browser.msie&&6<s.browser.version&&e.dropShadows&&void 0!==e.animation.opacity&&this.toggleClass(i.c.shadowClass+"-off")},i.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"},i.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}},s.fn.extend({hideSuperfishUl:function(){var e=i.op,t=!0===e.retainPath?e.$path:"";e.retainPath=!1;var n=s(["li.",e.hoverClass].join(""),this).add(this).not(t).removeClass(e.hoverClass).find(">ul").hide().css("visibility","hidden");return e.onHide.call(n),this},showSuperfishUl:function(){var e=i.op,t=(i.c.shadowClass,this.addClass(e.hoverClass).find(">ul:hidden").css("visibility","visible"));return i.IE7fix.call(t),e.onBeforeShow.call(t),t.animate(e.animation,e.speed,function(){i.IE7fix.call(t),e.onShow.call(t)}),this}})}($),function(r){r.fn.supersubs=function(e){var t=r.extend({},r.fn.supersubs.defaults,e);return this.each(function(){var e=r(this),c=r.meta?r.extend({},t,e.data()):t,l=r('<li id="menu-fontsize">&#8212;</li>').css({padding:0,position:"absolute",top:"-999em",width:"auto"}).appendTo(e).width();r("#menu-fontsize").remove(),$ULs=e.find("ul"),$ULs.each(function(e){var t=$ULs.eq(e),n=t.children(),i=n.children("a"),o=n.css("white-space","nowrap").css("float"),a=t.add(n).add(i).css({float:"none",width:"auto"}).end().end()[0].clientWidth/l;(a+=c.extraWidth)>c.maxWidth?a=c.maxWidth:a<c.minWidth&&(a=c.minWidth),a+="em",t.css("width",a),n.css({float:o,width:"100%","white-space":"normal"}).each(function(){var e=r(">ul",this),t=void 0!==e.css("left")?"left":"right";e.css(t,a)})})})},r.fn.supersubs.defaults={minWidth:9,maxWidth:25,extraWidth:0}}($),function(s){s.fn.hoverIntent=function(e,t){var n,i,o,a,c={sensitivity:7,interval:100,timeout:0};c=s.extend(c,t?{over:e,out:t}:e);function l(e){n=e.pageX,i=e.pageY}function r(e){for(var t=("mouseover"==e.type?e.fromElement:e.toElement)||e.relatedTarget;t&&t!=this;)try{t=t.parentNode}catch(e){t=this}if(t==this)return!1;var n=s.extend({},e),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseover"==e.type?(o=n.pageX,a=n.pageY,s(i).bind("mousemove",l),1!=i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){d(n,i)},c.interval))):(s(i).unbind("mousemove",l),1==i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){!function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,c.out.apply(t,[e])}(n,i)},c.timeout)))}var d=function(e,t){if(t.hoverIntent_t=clearTimeout(t.hoverIntent_t),Math.abs(o-n)+Math.abs(a-i)<c.sensitivity)return s(t).unbind("mousemove",l),t.hoverIntent_s=1,c.over.apply(t,[e]);o=n,a=i,t.hoverIntent_t=setTimeout(function(){d(e,t)},c.interval)};return this.mouseover(r).mouseout(r)}}($);